<div class="requestsContainer">
  <mat-card class="requestCard" *ngFor="let request of _shiftRequests">

    <!-- ROW: Left = category, Right = date/time -->
    <div (click)="toggleHelpers(request)" class="request-row">
      <!-- Left side: category -->
      <div class="request-left">
        <div class="request-category">{{ request.shift_category.name }}</div>
      </div>

      <!-- Right side: date and time -->
      <div class="request-right">
        <div class="request-date">{{ request.startTime | date:'EEE, dd.MM.yy' }}</div>
        <div class="request-time">
          {{ request.startTime | date:'HH:mm' }} â€“ {{ request.endTime | date:'HH:mm' }} Uhr
        </div>
        <div class="request-end-date" *ngIf="nextDay(request)">
          ({{ request.endTime | date:'EEE, dd.MM.yy' }})
        </div>
      </div>
    </div>
    <div class="icon-container">
      <mat-icon class="dropdown-icon">expand_more</mat-icon>
    </div>
    <!-- <button (click)="test()">TESTER</button> -->

    <!-- Helfer anzeigen -->
    <div class="activity-helpers" *ngIf="showHelpers">
      <p>{{request.shift_category.description}}</p>
      <h3>Schicht Helfer:</h3>
      <div *ngFor="let helper of activitys" class="helper-item">
        <div *ngIf="helper.status === 'confirmed' || helper.status === 'requested'" class="helper-row">
          <span class="status-bar" [ngClass]="{
      'green': helper.status === 'confirmed',
      'yellow': helper.status === 'requested'
    }">
          </span>

          <span class="helper-name">
            {{ helper.user?.firstName }} {{ helper.user?.lastName }}
            <span *ngIf="helper.isCurrent">(Du)</span>
          </span>
        </div>
      </div>
    </div>

    <!-- BUTTONS -->
    <div class="buttonContainer">
      <button (click)="accReq(request)" class="button ja">Ja</button>
      <button (click)="decReq(request)" class="button nein">Nein</button>
    </div>
  </mat-card>
</div>