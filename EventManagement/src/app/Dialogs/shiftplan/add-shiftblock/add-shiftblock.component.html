<div class="shiftblock-dialog">

  <div class="card-grid">

    <mat-card class="block-card">
      <mat-card-title>
        <mat-icon>schedule</mat-icon>
        Startzeit
      </mat-card-title>
      <p class="hint">Wann beginnt der Schichtblock?</p>

      <div class="input-row">
        <input matInput [matDatepicker]="pickerDate"
          [(ngModel)]="currentBlock.startTime"
          (ngModelChange)="onInputChange()"
          readonly (click)="pickerDate.open()" />

        <mat-datepicker #pickerDate></mat-datepicker>

        <input matInput [ngxMatTimepicker]="pickerTime"
          [(ngModel)]="startTimeTime"
          (ngModelChange)="onTimeInputChange()"
          readonly />

        <ngx-mat-timepicker #pickerTime></ngx-mat-timepicker>
      </div>
    </mat-card>

    <mat-card class="block-card">
      <mat-card-title>
        <mat-icon>repeat</mat-icon>
        Dauer & Wiederholung
      </mat-card-title>
      <p class="hint">Wie lang ist eine Schicht und wie oft?</p>

      <div class="input-row">
        <mat-form-field appearance="outline">
          <mat-label>Schichtl√§nge</mat-label>
          <input matInput type="number"
            [(ngModel)]="currentBlock.intervall"
            (ngModelChange)="onInputChange()" />
          <span matSuffix>Min</span>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Anzahl</mat-label>
          <input matInput type="number"
            [(ngModel)]="currentBlock.numberOfShifts"
            (ngModelChange)="onInputChange()" />
        </mat-form-field>
      </div>
    </mat-card>

    <mat-card class="block-card">
      <mat-card-title>
        <mat-icon>group</mat-icon>
        Besetzung
      </mat-card-title>
      <p class="hint">Wie viele Helfer pro Schicht?</p>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Helfer pro Schicht</mat-label>
        <input matInput type="number"
          [(ngModel)]="currentBlock.activitiesPerShift" />
        <span matSuffix>Personen</span>
      </mat-form-field>
    </mat-card>

  </div>

  <mat-card class="summary-card" *ngIf="!outOfEventDate(); else error">
    <p>‚è±Ô∏è {{ currentBlock.numberOfShifts }} √ó {{ currentBlock.intervall }} Minuten</p>
    <p>üèÅ Ende: {{ currentBlock.endTime | date:'EEE dd.MM HH:mm' }}</p>
  </mat-card>

  <ng-template #error>
    <mat-card class="summary-card error">
      ‚ö†Ô∏è Der Schichtblock endet nach dem Eventende.
    </mat-card>
  </ng-template>

  <button mat-flat-button color="primary"
    class="create-button"
    [disabled]="outOfEventDate()"
    (click)="newBlock()">
    Schichtblock erstellen
  </button>

</div>
